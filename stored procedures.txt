CREATE PROCEDURE `AddDepartment`(
    IN dept_name VARCHAR(255)
)
BEGIN
    INSERT INTO crm_department (department_name)
    VALUES (dept_name);
END

CREATE PROCEDURE `AddEmployee`(
    IN p_department_id BIGINT,
    IN p_employee_number VARCHAR(255),
    IN p_employee_first_name VARCHAR(255),
    IN p_employee_last_name VARCHAR(255),
    IN p_employee_short_name VARCHAR(255),
    IN p_employee_email VARCHAR(255),
    IN p_employee_dob DATE,
    IN p_employee_contact_number VARCHAR(10),
    IN p_employee_designation VARCHAR(255),
    IN p_employee_reporting_to VARCHAR(255),
    IN p_employee_digital_signature VARCHAR(255),
    IN p_employee_date_of_reliving DATE,
    IN p_employee_photo VARCHAR(255)
)
BEGIN
    INSERT INTO crm_employee (
        department_id,
        employee_number,
        employee_first_name,
        employee_last_name,
        employee_short_name,
        employee_email,
        employee_dob,
        employee_contact_number,
        employee_designation,
        employee_reporting_to,
        employee_digital_signature,
        employee_date_of_reliving,
        employee_photo
    ) VALUES (
        p_department_id,
        p_employee_number,
        p_employee_first_name,
        p_employee_last_name,
        p_employee_short_name,
        p_employee_email,
        p_employee_dob,
        p_employee_contact_number,
        p_employee_designation,
        p_employee_reporting_to,
        p_employee_digital_signature,
        p_employee_date_of_reliving,
        p_employee_photo
    );
END

CREATE PROCEDURE `DeleteCustomerById`(IN p_customer_id INT)
BEGIN
  DELETE FROM crm_customer WHERE customer_id = p_customer_id;
END

CREATE PROCEDURE `GetCustomerById`(IN p_customer_id INT)
BEGIN
  SELECT * FROM crm_customer WHERE customer_id = p_customer_id;
END

CREATE PROCEDURE `GetDepartments`()
BEGIN
    SELECT * FROM crm_department;
END

CREATE PROCEDURE `GetEmployees`()
BEGIN
    SELECT e.*, d.department_name
    FROM crm_employee e
    LEFT JOIN crm_department d ON e.department_id = d.department_id;
END

CREATE PROCEDURE `InsertCustomer`(
    IN p_customer_name VARCHAR(255),
    IN p_customer_short_name VARCHAR(255),
    IN p_customer_contact_person VARCHAR(255),
    IN p_customer_address TEXT,
    IN p_customer_mail_id VARCHAR(255),
    IN p_customer_contact_number VARCHAR(50),
    IN p_customer_gst_num VARCHAR(50),
    IN p_customer_country VARCHAR(100),
    IN p_customer_active TINYINT(1)
)
BEGIN
    INSERT INTO crm_customer (
        customer_name,
        customer_short_name,
        customer_contact_person,
        customer_address,
        customer_mail_id,
        customer_contact_number,
        customer_gst_num,
        customer_country,
        customer_active
    ) VALUES (
        p_customer_name,
        p_customer_short_name,
        p_customer_contact_person,
        p_customer_address,
        p_customer_mail_id,
        p_customer_contact_number,
        p_customer_gst_num,
        p_customer_country,
        p_customer_active
    );
END

CREATE PROCEDURE `UpdateCustomerById`(
  IN p_customer_id INT,
  IN p_customer_name VARCHAR(255),
  IN p_customer_contact_person VARCHAR(255),
  IN p_customer_address TEXT,
  IN p_customer_mail_id VARCHAR(255),
  IN p_customer_contact_number VARCHAR(50),
  IN p_customer_gst_num VARCHAR(50),
  IN p_customer_country VARCHAR(100),
  IN p_customer_active TINYINT
)
BEGIN
  UPDATE crm_customer
  SET
    customer_name = p_customer_name,
    customer_contact_person = p_customer_contact_person,
    customer_address = p_customer_address,
    customer_mail_id = p_customer_mail_id,
    customer_contact_number = p_customer_contact_number,
    customer_gst_num = p_customer_gst_num,
    customer_country = p_customer_country,
    customer_active = p_customer_active
  WHERE customer_id = p_customer_id;
END